<?xml version="1.0" encoding="UTF-8"?>
<!--
   ====================================================================
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
   ====================================================================
-->
<!DOCTYPE document PUBLIC "-//APACHE//DTD Documentation V1.1//EN" "../dtd/document-v11.dtd">

<document>
  <header>
    <title>POI Release Guide</title>
    <authors>
      <person name="Yegor Kozlov" email="yegor@apache.org"/>
    </authors>
  </header>

  <body>
    <section>
       <title>POI Release Guide</title>

     <section><title>Prerequisites</title>

  <ol>
    <li> You should read the <link href="http://apache.org/dev/release.html">Apache Release FAQ</link></li>
    <li> You must have shell access to people.apache.org</li>
    <li> Release manager must have his public key appended to the KEYS file checked in to SVN and the key published on one of the public key servers.
      More info can be found here: <link href="http://www.apache.org/dev/release-signing.html">http://www.apache.org/dev/release-signing.html</link></li>
    <li> You must have <link href="http://java.sun.com">JDK 1.4 / 1.5</link></li>
    <li> You must have the following utilities installed on your local machine and available in your path:
      <ul>
        <li><link href="http://www.openssh.com">ssh</link></li>
        <li><link href="http://www.gnupg.org">gnupg</link></li>
        <li><link href="http://www.openssl.org">openssl</link></li>
      </ul> 
      For Windows users, install Cygwin and make sure you have the above components. 
    </li>
    <li> The POI build system requires two components to perform a build
      <ul>
        <li><link href="http://ant.apache.org">Ant</link></li>
        <li><link href="http://forrest.apache.org/">Forrest</link></li>
      </ul>
    </li> 
  </ol>
      </section>
    <section><title>Building Release Artifacts</title>
      <ul>
        <li>Ensure the changelog is up to date</li>
        <li>Tag SVN:
          <br/>
          <code> svn cp https://svn.apache.org/repos/asf/poi/trunk \ </code> <br/>
          <code>  https://svn.apache.org/repos/asf/poi/tags/REL_3_0_2_BETA1 \ </code> <br/>
          <code> -m "tag trunk as REL_3_0_2_BETA1" </code>
        </li>
        <li>Update version.id in build.xml</li>
        <li>Start a new section for the next release in xdocs/sites.xml and status.xml in the documentation/content/xdocs directory</li>
        <li>Checkout the new tag:<br/>
          <code>
  svn checkout https://svn.apache.org/repos/asf/poi/tags/REL_3_0_2_BETA1
          </code>
        </li>
        <li>Merge if needed: <br/>
          <code> cd tags/REL_3_0_2_BETA1  </code><br/>                
          <code> svn merge https://svn.apache.org/repos/asf/poi/tags/REL_3_0_2_BETA1 \ </code> <br/>
          <code> https://svn.apache.org/repos/asf/poi/trunk  </code>                
        </li>
        <li>Build as if the vote had passed. <br/>
          Typically a release vote lasts 7 days so the filename dates should be +7 days from current date.<br/>
          <code> cd tags/REL_3_0_2_BETA1  </code><br/>                
          Main distribution:<br/> 
          <code> ant dist </code> <br/>
          Maven artifacts:<br/> 
          <code> ant maven-dist </code>                
        </li>
        <li>Create MD5 checksums for all artifacts to be published:<br/>
          <code>openssl md5 &lt; file &gt; file.md5</code><br/>
        </li>
        <li>Signing all artifacts to be published:<br/>
          <code>gpg --armor --output file.asc --detach-sig $file; </code><br/>
          Verify signatures:
          <code>gpg --verify file.asc file</code><br/>
        </li>
        <li>Upload to your area at people.apache.org<br/></li>
      </ul>
    </section>

    </section>
  </body>
</document>
